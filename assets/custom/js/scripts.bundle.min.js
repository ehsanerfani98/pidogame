jQuery((function(){$(".theme-mode-light-btn").on("click",(function(){KTApp.setThemeMode("light",(function(){$(".theme-mode-dark-btn").removeClass("active"),$(".theme-mode-dark-icon").addClass("d-none"),$(".theme-mode-light-btn").addClass("active"),$(".theme-mode-light-icon").removeClass("d-none"),$("#kt_user_menu_dark_mode_toggle").prop("checked",!1);var date,options={expires:new Date(Date.now()+31536e6)};KTCookie.set("theme_mode","light",options)}))})),$(".theme-mode-dark-btn").on("click",(function(){KTApp.setThemeMode("dark",(function(){$(".theme-mode-light-btn").removeClass("active"),$(".theme-mode-light-icon").addClass("d-none"),$(".theme-mode-dark-btn").addClass("active"),$(".theme-mode-dark-icon").removeClass("d-none"),$("#kt_user_menu_dark_mode_toggle").prop("checked",!0);var date,options={expires:new Date(Date.now()+31536e6)};KTCookie.set("theme_mode","dark",options)}))})),$("#kt_user_menu_dark_mode_toggle").on("change",(function(){this.checked?KTApp.setThemeMode("dark",(function(){$(".theme-mode-light-btn").removeClass("active"),$(".theme-mode-light-icon").addClass("d-none"),$(".theme-mode-dark-btn").addClass("active"),$(".theme-mode-dark-icon").removeClass("d-none");var date,options={expires:new Date(Date.now()+31536e6)};KTCookie.set("theme_mode","dark",options)})):KTApp.setThemeMode("light",(function(){$(".theme-mode-dark-btn").removeClass("active"),$(".theme-mode-dark-icon").addClass("d-none"),$(".theme-mode-light-btn").addClass("active"),$(".theme-mode-light-icon").removeClass("d-none");var date,options={expires:new Date(Date.now()+31536e6)};KTCookie.set("theme_mode","light",options)}))})),$("#header-cart-btn").on("click",(function(){null!==document.getElementById("header-cart-loading")&&$.ajax({url:templateDirectory+"/ajax/get-header-cart.php",type:"GET",success:function(result){$("#header-cart-wrap").append(result),$("#header-cart-loading").remove()}})})),$(document).on("click","#header-cart-remove-item",(function(){var productId=$(this).data("product-id");$.ajax({url:templateDirectory+"/ajax/remove-cart-product.php",type:"POST",data:{productId:productId},success:function(){$.ajax({url:templateDirectory+"/ajax/get-header-cart.php",type:"GET",success:function(result){$("#header-cart-wrap").empty(),$("#header-cart-wrap").append(result),$.ajax({url:templateDirectory+"/ajax/get-cart-count.php",type:"GET",success:function(result){result>0?$("#header-cart-count").text(result):$("#header-cart-count").remove()}})}})}})}));var notificationModal=document.getElementById("kt_notification_modal");notificationModal.addEventListener("show.bs.modal",(function(event){var button,recipient=event.relatedTarget.getAttribute("data-bs-notification-id"),modalTitle=notificationModal.querySelector(".modal-title-label"),modalBody=notificationModal.querySelector(".modal-body"),modalBadge=notificationModal.querySelector(".modal-badge"),modalDate=notificationModal.querySelector(".notification-date");$.ajax({url:templateDirectory+"/ajax/get-notification.php",type:"POST",data:{id:recipient},success:function(result){var resultArray=JSON.parse(result);modalTitle.textContent=resultArray.title,modalBody.innerHTML=resultArray.content,1==resultArray.important?modalBadge.textContent="مهم":modalBadge.textContent=null,modalDate.textContent=resultArray.date}})})),$('textarea[name="comment"]').maxlength({warningClass:"badge badge-primary ss02",limitReachedClass:"badge badge-danger ss02"});const checkRating=function(){const value=document.querySelector('input[name="rating"]:checked').value;return"0"===value?{valid:!1,message:"امتیاز خود را انتخاب کنید"}:{valid:!0}};var KTProductCommentSubmit={init:function(){i=document.querySelector("#kt_product_submit_comment_form"),t=document.getElementById("kt_product_comment_submit"),e=FormValidation.formValidation(i,{fields:{rating:{validators:{callback:{callback:checkRating}}},comment:{validators:{notEmpty:{message:"متن دیدگاه خود را وارد نمایید"}}},first_name:{validators:{notEmpty:{message:"نام مورد نیاز است"}}},email:{validators:{notEmpty:{message:"آدرس ایمیل مورد نیاز است"},emailAddress:{message:"ایمیل وارد شده معتبر نیست"}}}},plugins:{trigger:new FormValidation.plugins.Trigger,bootstrap:new FormValidation.plugins.Bootstrap5({rowSelector:".fv-row",eleInvalidClass:"",eleValidClass:""})}}),t.addEventListener("click",(function(i){i.preventDefault(),e&&e.validate().then((function(e){"Valid"==e?(t.setAttribute("data-kt-indicator","on"),t.disabled=!0,userId=t.getAttribute("data-comment-author-id"),productId=t.getAttribute("data-product-id"),content=document.getElementsByName("comment")[0].value,rating=document.querySelector('input[name="rating"]:checked').value,0==userId?(firstName=document.getElementsByName("first_name")[0].value,lastName=document.getElementsByName("last_name")[0].value,email=document.getElementsByName("email")[0].value,website=document.getElementsByName("website")[0].value,$.ajax({url:templateDirectory+"/ajax/post-product-comment.php",type:"POST",data:{type:"guest",productId:productId,userId:userId,firstName:firstName,lastName:lastName,email:email,website:website,content:content,rating:rating},success:function(result){t.removeAttribute("data-kt-indicator"),t.disabled=!1,t.isConfirmed}})):$.ajax({url:templateDirectory+"/ajax/post-product-comment.php",type:"POST",data:{type:"user",productId:productId,userId:userId,content:content,rating:rating},success:function(result){t.removeAttribute("data-kt-indicator"),t.disabled=!1,t.isConfirmed}})):Swal.fire({text:"با عرض پوزش، برخی اطلاعات وارد شده صحیح نمی باشند، لطفا دوباره تلاش کنید.",icon:"error",buttonsStyling:!1,confirmButtonText:"متوجه شدم!",customClass:{confirmButton:"btn btn-primary"}})}))}))}},t,e,i;KTUtil.onDOMContentLoaded((function(){KTProductCommentSubmit.init()})),$("#kt_modal_product_buy .variations tr").each((function(){var current=$(this);current.find("th.label label").unwrap().removeAttr("for").addClass("required fs-5 fw-bold mb-2"),current.find("td.value select").unwrap().prop("required",!0).addClass("form-select form-select-solid").attr("data-allow-clear","true").select2({placeholder:"انتخاب کنید",minimumResultsForSearch:-1}),current.wrapAll('<div class="d-flex flex-column mb-10"></div>').contents().unwrap()})),$("#kt_modal_product_buy .variations").addClass("d-block"),$("#kt_modal_product_buy .variations").find("tbody").addClass("d-block"),$(".reset_variations").remove(),$(".woocommerce-variation").addClass("d-none"),$("#kt_modal_product_buy").find(".quantity").prepend('<button type="button" class="btn btn-icon btn-active-color-gray-700 position-absolute translate-middle-y top-50 start-0" data-kt-dialer-control="decrease"><span class="svg-icon svg-icon-1"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><rect opacity="0.3" x="2" y="2" width="20" height="20" rx="5" fill="currentColor"></rect><rect x="6.0104" y="10.9247" width="12" height="2" rx="1" fill="currentColor"></rect></svg></span></button>'),$("#kt_modal_product_buy").find(".quantity").append('<button type="button" class="btn btn-icon btn-active-color-gray-700 position-absolute translate-middle-y top-50 end-0" data-kt-dialer-control="increase"><span class="svg-icon svg-icon-1"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><rect opacity="0.3" x="2" y="2" width="20" height="20" rx="5" fill="currentColor"></rect><rect x="10.8891" y="17.8033" width="12" height="2" rx="1" transform="rotate(-90 10.8891 17.8033)" fill="currentColor"></rect><rect x="6.01041" y="10.9247" width="12" height="2" rx="1" fill="currentColor"></rect></svg></span></button>'),$("#kt_modal_product_buy").find(".quantity").find("input").attr("type","text").addClass("form-control form-control-solid border-0 text-center ss02 w-100px").attr("readonly",!0).attr("data-kt-dialer-control","input").removeAttr("inputmode").removeAttr("autocomplete").removeAttr("size").removeAttr("title"),$("#kt_modal_product_buy").find(".quantity").addClass("position-relative w-100px d-inline-block");var addToCartMin=parseInt($("#kt_modal_product_buy").find(".quantity").find("input").attr("min")),addToCartMax=parseInt($("#kt_modal_product_buy").find(".quantity").find("input").attr("max")),addToCartStep=parseInt($("#kt_modal_product_buy").find(".quantity").find("input").attr("step")),addToCartDialerElement=document.querySelector(".quantity"),addToCartDialerObject=new KTDialer(addToCartDialerElement,{min:addToCartMin,max:addToCartMax,step:addToCartStep});$("#kt_modal_product_buy").find(".single_add_to_cart_button").addClass("btn btn-primary ms-2").removeClass("button alt"),$("#kt_modal_product_buy").find(".stock").addClass("badge badge-info mb-0 ss02"),$(".single_add_to_cart_button").append('<span class="price-badge badge badge-light-primary ms-2 ss02"></span>'),$(".quantity,.single_add_to_cart_button").wrapAll('<div class="text-center"></div>'),$("#kt_modal_product_buy").find(".notice p").last().addClass("mb-0");var thePrice=$("#kt_modal_product_buy").attr("data-simple-price"),productBuyModal;thePrice&&$(".price-badge").empty().text(thePrice),$("#kt_modal_product_buy input").change((function(){var variationId=$('input[name="variation_id"]').val();if(variationId){var thePrice=$("#kt_modal_product_buy").attr("data-"+variationId+"-price");$(".price-badge").empty().text(thePrice)}else $(".price-badge").empty();var addToCartMin=parseInt($("#kt_modal_product_buy").find(".quantity").find("input").attr("min")),addToCartMax=parseInt($("#kt_modal_product_buy").find(".quantity").find("input").attr("max"));addToCartDialerObject.setMinValue(addToCartMin),addToCartDialerObject.setMaxValue(addToCartMax),addToCartDialerObject.update()})),document.getElementById("kt_modal_product_buy").addEventListener("show.bs.modal",(function(event){var button=event.relatedTarget;$(button).each((function(){$.each(this.attributes,(function(){if(this.specified&&this.name.startsWith("data-bs-attribute")){var recipient=this.name.replace("data-bs-","");$("#kt_modal_product_buy").find('[name="'+recipient+'"]').val(this.value).trigger("change")}}))}))}))}));